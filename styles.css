:root{
  --gold:#d4af37; --ink:#0b1324; --muted:rgba(255,255,255,.8);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--ink); color:#e9eefc; font-family:'Inter',system-ui,Segoe UI,Roboto,Arial;
  min-height:100svh; overflow:auto;
}

/* ФОН */
.stage{
  position:relative; min-height:100svh; display:flex; justify-content:center; align-items:center; padding:24px;
  background:
    radial-gradient(1200px 800px at 80% 10%, rgba(212,175,55,.08), transparent 60%),
    radial-gradient(1000px 700px at 15% 85%, rgba(212,175,55,.06), transparent 60%),
    linear-gradient(to bottom, rgba(4,8,18,.6), rgba(4,8,18,.9)),
    url('fon.jpg') center/cover no-repeat fixed;
}
.grain{position:absolute; inset:0; pointer-events:none; mix-blend-mode:soft-light; opacity:.3;
  background-image:url('data:image/svg+xml;utf8,\
   <svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160">\
     <filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/></filter>\
     <rect width="100%" height="100%" filter="url(%23n)" opacity="0.16"/></svg>');
  animation:grain 6s steps(6) infinite;
}
@keyframes grain{
  0%{transform:translate(0)} 20%{transform:translate(-1%,-1%)} 40%{transform:translate(1%,1%)}
  60%{transform:translate(1%,-1%)} 80%{transform:translate(-1%,1%)} 100%{transform:translate(0)}
}

/* ГРИД-ЛЕЙАУТ */
.shell{
  width:min(1200px, 100%);
  display:grid; grid-template-columns: 1.2fr 0.8fr; gap:clamp(16px, 4vw, 40px);
  align-items:center; position:relative; z-index:1;
  perspective: 1600px;
}

/* БРЕНД + ЛОГО */
.brand{display:grid; gap:16px; align-content:start; z-index:3}
.logoWrap{
  position:relative; width:min(480px, 64vw); aspect-ratio:1.08; padding:18px; border-radius:22px;
  background:
    radial-gradient(60% 60% at 50% 50%, rgba(212,175,55,.10), transparent 70%),
    linear-gradient(180deg, rgba(20,18,8,.45), rgba(12,10,6,.25));
  border:1px solid rgba(212,175,55,.35);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.06), 0 12px 40px rgba(0,0,0,.45), 0 0 0 1px rgba(212,175,55,.18);
}
.logoWrap::before,
.logoWrap::after{
  content:""; position:absolute; inset:-8px; border-radius:26px; pointer-events:none;
  background: conic-gradient(from 0deg, rgba(212,175,55,.35), transparent 40%, rgba(212,175,55,.25), transparent 80%, rgba(212,175,55,.35));
  filter:blur(12px); opacity:.35; z-index:-1;
}
.logo{width:100%; height:100%; background:url('logop.png') center/contain no-repeat; filter: drop-shadow(0 12px 36px rgba(212,175,55,.35));
  mask-image: linear-gradient(to bottom, #000 85%, transparent); }
.title{
  font-family:'Cinzel',serif; font-weight:700; letter-spacing:.12em; text-transform:uppercase;
  color:var(--gold); font-size:clamp(28px, 3.4vw, 56px); text-shadow:0 0 30px rgba(212,175,55,.2), 0 2px 0 #6b5420; margin:0;
}
.subtitle{max-width:60ch; line-height:1.5; color:#dbe4ff}

/* ПЕРСОНАЖ — БЛИЖЕ И КРУПНЕЕ */
.hero{position:relative; align-self:end; justify-content:flex-end; display:flex; z-index:2; transform-style:preserve-3d}
.hero::before{
  content:""; position:absolute; right:2%; bottom:4%; width:78%; height:66%; z-index:-1;
  background:radial-gradient(50% 55% at 60% 70%, rgba(212,175,55,.26), transparent 72%); filter:blur(26px);
}
.heroImg{
  width:min(720px, 50vw); max-height:78svh; object-fit:contain;
  transform: translateZ(140px) scale(1.18);
  filter: drop-shadow(0 38px 110px rgba(0,0,0,.65)) drop-shadow(0 12px 36px rgba(212,175,55,.28));
  transition: transform .2s ease-out, filter .2s ease-out;
}

/* МЕНЮ */
.card{
  grid-column:1 / 2; padding:22px; border-radius:22px; width:min(560px, 100%);
  backdrop-filter:blur(10px);
  background:linear-gradient(180deg, rgba(11,19,36,.76), rgba(11,19,36,.55));
  border:1px solid rgba(212,175,55,.28);
  box-shadow:0 20px 60px rgba(0,0,0,.55), inset 0 0 0 1px rgba(255,255,255,.05);
  z-index:3;
}
.menu{display:grid; gap:12px}
.row{display:flex; gap:10px}
.row>.btn{flex:1}
.btn{
  --p:14px 18px; --r:16px;
  display:flex; align-items:center; justify-content:space-between;
  padding:var(--p); border-radius:var(--r);
  border:1px solid rgba(212,175,55,.25);
  background:linear-gradient(180deg, rgba(16,26,48,.8), rgba(13,21,38,.5));
  color:#fff3d6; font-weight:700; letter-spacing:.04em; cursor:pointer; position:relative; overflow:hidden;
  transition:transform .2s ease, border-color .2s ease, background .3s ease;
}
.btn:hover{transform:translateY(-1px); border-color:var(--gold); box-shadow:0 10px 30px rgba(212,175,55,.18), inset 0 0 0 1px rgba(255,255,255,.08)}
.btn.primary{background:linear-gradient(180deg, rgba(36,29,8,.6), rgba(21,17,6,.45)); border-color:rgba(212,175,55,.55)}
.btn[disabled]{opacity:.55; cursor:not-allowed; filter:grayscale(.2)}
.spark{position:absolute; inset:0; opacity:0; transition:opacity .25s ease;
  background:radial-gradient(120px 40px at var(--mx,50%) calc(var(--my,50%) + 10px), rgba(212,175,55,.15), transparent 40%); mix-blend-mode:screen}
.btn:hover .spark{opacity:1}
.hint{font-size:12px; color:var(--muted); margin-top:10px}

/* НИЖНЯЯ ПАНЕЛЬ: копирайт справа */
.footer{
  position:fixed; left:16px; right:16px; bottom:16px; display:flex; align-items:center; gap:12px; z-index:3; color:#cfd7f3
}
.lang{display:flex; gap:6px; align-items:center; border:1px solid rgba(212,175,55,.3); padding:6px 10px; border-radius:999px; background:rgba(8,14,26,.5)}
.lang button{background:none; border:none; color:#f2e9cf; font-weight:700; letter-spacing:.03em; cursor:pointer; padding:4px 8px; border-radius:999px}
.lang button.active{color:#131a2c; background:linear-gradient(180deg, #d9b84f, #b9932a)}
.sep{width:1px; height:12px; background:linear-gradient(to bottom, transparent, rgba(255,255,255,.35), transparent)}
.copy{margin-left:auto; text-align:right}

/* ====== Магазин (выезжающая панель) ====== */
.storeBackdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.35);
  backdrop-filter: blur(2px); z-index: 30;
  opacity:0; transition: opacity .25s ease;
}
.store{
  position:fixed; top:0; right:0; height:100dvh;
  width:min(420px, 92vw);
  display:grid; grid-template-rows:auto 1fr; z-index:31;
  background:linear-gradient(180deg, rgba(11,19,36,.92), rgba(11,19,36,.82));
  border-left:1px solid rgba(212,175,55,.28);
  box-shadow:-20px 0 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.04);
  transform: translateX(100%); transition: transform .32s ease;
}
.store[open]{ transform: translateX(0); }
.storeBackdrop[open]{ opacity:1; }
.store-hd{display:flex; align-items:center; justify-content:space-between; padding:16px 18px; border-bottom:1px solid rgba(212,175,55,.25)}
.store-hd h3{margin:0; font-family:'Cinzel',serif; letter-spacing:.08em; color:var(--gold); text-transform:uppercase}
.store-body{padding:14px 14px 18px; overflow:auto; display:grid; gap:12px}

/* Карточки наборов */
.pack{
  padding:16px; border-radius:18px;
  backdrop-filter: blur(10px);
  background:linear-gradient(180deg, rgba(11,19,36,.78), rgba(11,19,36,.58));
  border:1px solid rgba(212,175,55,.28);
  box-shadow:0 14px 40px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.05);
}
.pack-hd{display:flex; align-items:center; justify-content:space-between; margin-bottom:8px}
.tag{
  padding:6px 10px; border-radius:999px; font-weight:700; letter-spacing:.04em;
  border:1px solid rgba(212,175,55,.35); color:#f6f2e6; background:rgba(8,14,26,.5)
}
.tag--pro{background:linear-gradient(180deg,#d9b84f,#b9932a); color:#1a1f2e; border-color:rgba(212,175,55,.6)}
.price{color:#fff3d6; font-weight:800}
.pack-list{margin:10px 0 14px 18px; padding:0; color:#dbe4ff}
.pack-list li{margin:6px 0}
.pack-actions{ display:flex; gap:8px; margin-top:8px }
.btn.more{
  --p:12px 14px; --r:14px;
  flex:1; display:flex; align-items:center; justify-content:center;
  padding:var(--p); border-radius:var(--r);
  background:none; color:#f6f2e6; cursor:pointer;
  border:1px solid rgba(212,175,55,.35);
  transition:transform .2s ease, border-color .2s ease, box-shadow .2s ease;
}
.btn.more:hover{ transform:translateY(-1px); border-color:var(--gold); box-shadow:0 8px 20px rgba(212,175,55,.16) }
.buy{
  width:100%;
  --p:12px 14px; --r:14px;
  display:flex; align-items:center; justify-content:center;
  padding:var(--p); border-radius:var(--r);
  border:1px solid rgba(212,175,55,.45);
  background:linear-gradient(180deg, rgba(36,29,8,.65), rgba(21,17,6,.5));
  color:#fff5d1; font-weight:800; letter-spacing:.04em; cursor:pointer;
  transition:transform .2s ease, border-color .2s ease, box-shadow .2s ease;
}
.buy:hover{transform:translateY(-1px); box-shadow:0 12px 30px rgba(212,175,55,.22)}

/* Галерея внутри модалки «Подробнее» */
.items-grid{
  display:grid; grid-template-columns:repeat(3, 1fr); gap:12px;
}
.item-card{
  display:flex; flex-direction:column; gap:8px; padding:10px; border-radius:14px;
  background:linear-gradient(180deg, rgba(12,18,34,.85), rgba(12,18,34,.65));
  border:1px solid rgba(212,175,55,.22);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.04);
}
.item-img{
  width:100%; aspect-ratio:4/3; object-fit:cover; border-radius:10px;
  background:linear-gradient(135deg, rgba(212,175,55,.15), rgba(255,255,255,.04));
}
.item-title{font-weight:700; color:#fff3d6}
.item-price{color:#d9c070; font-weight:800}
.item-buy{
  --p:10px; border-radius:10px; padding:var(--p); cursor:pointer; border:1px solid rgba(212,175,55,.4);
  background:linear-gradient(180deg, rgba(36,29,8,.6), rgba(21,17,6,.45)); color:#fff5d1; font-weight:800;
}
.item-buy:hover{transform:translateY(-1px); box-shadow:0 10px 22px rgba(212,175,55,.18)}

/* Модалка общие стили уже есть из ранних блоков */
dialog{border:none; padding:0; border-radius:22px; width:min(820px,92vw);
  background:linear-gradient(180deg, rgba(14,20,36,.92), rgba(14,20,36,.82)); color:#e9eefc;
  box-shadow:0 30px 100px rgba(0,0,0,.65), inset 0 0 0 1px rgba(255,255,255,.06)}
dialog::backdrop{background:radial-gradient(60% 60% at 50% 50%, rgba(0,0,0,.35), rgba(0,0,0,.75))}
.modal-hd{display:flex; align-items:center; justify-content:space-between; padding:18px 22px; border-bottom:1px solid rgba(212,175,55,.25)}
.modal-hd h3{margin:0; font-family:'Cinzel',serif; letter-spacing:.08em; color:var(--gold)}
.modal-bd{padding:20px 22px; display:grid; gap:16px}
.modal-ft{display:flex; justify-content:flex-end; gap:10px; padding:12px 22px 22px}
.ghost{background:none; border:1px solid rgba(212,175,55,.35); color:#f6f2e6; padding:10px 14px; border-radius:14px; cursor:pointer}

/* Адаптив */
@media (max-width:1024px){
  .shell{grid-template-columns:1fr; justify-items:center}
  .brand{justify-items:center; text-align:center}
  .card{grid-column:auto; width:min(560px, 92vw)}
  .hero{order:3; justify-content:center}
  .heroImg{opacity:.9; width:min(720px, 86vw); transform:translateZ(90px) scale(1.12)}
  .items-grid{grid-template-columns:1fr 1fr}
}
@media (max-width:560px){
  .items-grid{grid-template-columns:1fr}
}

/* --- компактные иконки в модалке «Подробнее» --- */
.items-row{
  display:flex;
  gap:12px;
  align-items:stretch;
  overflow-x:auto;           /* если не помещаются — аккуратный скролл по оси X */
  padding:4px 2px 8px;
}

.item-chip{
  min-width:140px;
  width:140px;
  display:flex;
  flex-direction:column;
  gap:8px;
  padding:10px;
  border-radius:14px;
  background:linear-gradient(180deg, rgba(12,18,34,.85), rgba(12,18,34,.65));
  border:1px solid rgba(212,175,55,.22);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.04);
  text-align:center;
}

.item-chip img{
  width:72px;
  height:72px;
  object-fit:cover;
  border-radius:10px;
  margin:0 auto;
  display:block;
  background:linear-gradient(135deg, rgba(212,175,55,.15), rgba(255,255,255,.04));
}

.item-chip .item-title{
  font-size:12px;
  line-height:1.25;
  font-weight:700;
  color:#fff3d6;
}

.item-chip .item-price{
  font-size:12px;
  color:#d9c070;
  font-weight:800;
}

.item-chip .item-buy{
  --p:8px;
  padding:var(--p);
  border-radius:10px;
  border:1px solid rgba(212,175,55,.4);
  background:linear-gradient(180deg, rgba(36,29,8,.6), rgba(21,17,6,.45));
  color:#fff5d1;
  font-weight:800;
  cursor:pointer;
}
.item-chip .item-buy:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(212,175,55,.18) }

/* На совсем узких экранах карточки уже, но остаются в линию с прокруткой */
@media (max-width:480px){
  .item-chip{ min-width:128px; width:128px }
  .item-chip img{ width:64px; height:64px }
}

/* --- FIX: кнопки в строке действий набора --- */
.pack-actions{
  display:flex;
  gap:12px;
  margin-top:12px;
  align-items:stretch;
}

.pack-actions .btn{
  flex:1;              /* обе кнопки делят строку поровну */
  width:auto;          /* убираем старое width:100% у .buy */
  min-width:0;         /* даём тексту сжиматься без наезда */
  white-space:nowrap;  /* однострочно */
  text-align:center;
  justify-content:center;   /* центрируем текст */
}

/* стилизуем «Подробнее» как вторичную */
.pack-actions .more{
  background:none;
  border:1px solid rgba(212,175,55,.35);
  color:#f6f2e6;
}
.pack-actions .more:hover{
  transform:translateY(-1px);
  border-color:var(--gold);
  box-shadow:0 8px 20px rgba(212,175,55,.16);
}

/* «Купить» — основной */
.pack-actions .buy{
  background:linear-gradient(180deg, rgba(36,29,8,.65), rgba(21,17,6,.5));
  border:1px solid rgba(212,175,55,.45);
  color:#fff5d1;
}

/* —— Летопись: карточка и интерактив —— */
.chron-card{
  padding:16px;
  border-radius:16px;
  background:linear-gradient(180deg, rgba(12,18,34,.85), rgba(12,18,34,.65));
  border:1px solid rgba(212,175,55,.25);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.04);
  line-height:1.6;
}
.chron-card.state-ok{
  border-color:rgba(56,199,89,.7);
  box-shadow:0 0 0 1px rgba(255,255,255,.05) inset, 0 0 24px rgba(56,199,89,.25);
  background:linear-gradient(180deg, rgba(20,42,28,.9), rgba(17,34,24,.8));
}
.chron-card.state-bad{
  border-color:rgba(255,99,99,.7);
  box-shadow:0 0 0 1px rgba(255,255,255,.05) inset, 0 0 24px rgba(255,99,99,.25);
  background:linear-gradient(180deg, rgba(44,20,20,.9), rgba(36,16,16,.8));
}

.blank{
  display:inline-block;
  min-width:7ch;
  max-width:18ch;
  padding:4px 8px;
  margin:0 4px;
  border-radius:10px;
  border:1px solid rgba(212,175,55,.35);
  background:rgba(8,14,26,.5);
  color:#fff5d1;
  font-weight:700;
}
.blank.ok{ border-color:rgba(56,199,89,.8); background:rgba(20,42,28,.45); }
.blank.bad{ border-color:rgba(255,99,99,.85); background:rgba(44,20,20,.45); }

.chron-actions{
  display:flex; gap:10px; justify-content:flex-end; margin-top:12px;
}
